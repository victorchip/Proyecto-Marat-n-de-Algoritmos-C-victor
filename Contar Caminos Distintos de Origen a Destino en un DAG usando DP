#include <iostream>
#include <vector>
using namespace std;

int n,destino;
vector<vector<int>> adj;
vector<int> dp;

int countPaths(int u){
    if(u==destino) return 1;
    if(dp[u]!=-1) return dp[u];
    int total=0;
    for(int v: adj[u]) total += countPaths(v);
    return dp[u]=total;
}

int main(){
    int m,origen;
    cout<<"Ingrese número de nodos y aristas: ";
    cin>>n>>m;
    adj.assign(n,vector<int>());
    dp.assign(n,-1);
    cout<<"Ingrese aristas (u v):\n";
    for(int i=0;i<m;i++){
        int u,v; cin>>u>>v;
        adj[u].push_back(v);
    }
    cout<<"Ingrese nodo origen y destino: ";
    cin>>origen>>destino;

    int total=countPaths(origen);
    cout<<"Número de caminos distintos: "<<total<<endl;
    return 0;
}
